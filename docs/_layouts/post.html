<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/BlogPosting">
    {% include head.html %}
    <body class="has-push-menu">
        {% include minutes-to-read.html %}
        {% include svg-icons.html %}
        {% include header.html %}
        <section class="post">

            <article role="article" id="post" class="post-content" itemprop="articleBody">
                <p itemprop="post-info" class="post-info">
                    {% if page.date %}
                        <svg id="date" class="icon-calendar"><use xlink:href="#icon-calendar"></use></svg>
                        <time itemprop="datePublished" datetime="{{ page.date | date_to_xmlschema }}" class="date">
                            {% include date.html date=page.date %}
                        </time>
                    {% endif %}
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>{{ minutesText }}</span>
                </p>
                <h1 class="post-title" itemprop="name">{{ page.title }}</h1>
                <p itemprop="description" class="subtitle">{{ page.description }}</p>

                {% if page.image %}
                    <img src="{{ page.image }}" alt="Imagem de capa" class="post-cover">
                {% endif %}

                {% if page.audio %}
                    <div align="center">
                    <audio controls src="{{ page.audio }}" type="audio/mpeg">
                    Your browser does not support the <code>audio</code> element.
                    </div>
                {% endif %}

                {{ content }}
            </article>

            {% assign hasSimilar = '' %}
            {% for post in site.posts  %}
              {% assign postHasSimilar = false %}
                {% for tag in post.categories %}
                  {% for thisTag in page.categories %}
                    {% if postHasSimilar == false and hasSimilar.size < 6 and post != page and tag == thisTag %}
                      {% if hasSimilar.size == 0 %}
                      <div class="post-content">
                        <h4>Related Posts</h4>
                        <ul>
                      {% endif %}
                          <li class="post-content">
                            <a href="{{ site.url }}{{ post.url }}">{{ post.title }}</a>
                            {% if post.categories %}
                              (Categories: {% for category in post.categories %}<a href="/category/{{ category }}">{{ category }}</a>{% if forloop.last == false %}, {% endif %}{% endfor %})
                            {% endif %}
                          </li>
                    {% capture hasSimilar %}{{ hasSimilar }}*{% endcapture %}
                    {% assign postHasSimilar = true %}
                  {% endif %}
                {% endfor %}
              {% endfor %}
            {% endfor %}
            {% if hasSimilar.size > 0 %}
            </ul>
          </div>
          {% endif %}

            <div class="progress-bar" data-minutes="{{ totalMinutes }}">
                <span class="time-completed"></span>
                <span class="time-remaining"></span>
                <div class="bar">
                    <span class="completed" style="width:0%;"></span>
                    <span class="remaining" style="width:100%;"></span>
                </div>
            </div>

            {% include share.html %}
            {% include author.html %}
            {% include comments.html %}
            {% include footer.html %}
        </section>
    </body>
</html>
